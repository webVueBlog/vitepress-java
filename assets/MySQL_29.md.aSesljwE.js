import{_ as a,c as e,o as t,a8 as o}from"./chunks/framework.DDO5B0CJ.js";const s="/vitepress-java/assets/img_120.C56DJ1XJ.png",p="/vitepress-java/assets/img_121.CaB1xQz-.png",r="/vitepress-java/assets/img_122.De1chqCb.png",y=JSON.parse('{"title":"第 29 章 数据库维护","description":"","frontmatter":{},"headers":[],"relativePath":"MySQL/29.md","filePath":"MySQL/29.md"}'),i={name:"MySQL/29.md"},l=o('<h1 id="第-29-章-数据库维护" tabindex="-1">第 29 章 数据库维护 <a class="header-anchor" href="#第-29-章-数据库维护" aria-label="Permalink to &quot;第 29 章 数据库维护&quot;">​</a></h1><h2 id="备份数据" tabindex="-1">备份数据 <a class="header-anchor" href="#备份数据" aria-label="Permalink to &quot;备份数据&quot;">​</a></h2><p>像所有数据一样，MySQL的数据也必须经常备份。由于MySQL数据 库是基于磁盘的文件，普通的备份系统和例程就能备份MySQL的数据。 但是，由于这些文件总是处于打开和使用状态，普通的文件副本备份不 一定总是有效。</p><p>使用命令行实用程序mysqldump转储所有数据库内容到某个外部 文件。在进行常规备份前这个实用程序应该正常运行，以便能正 确地备份转储文件。</p><p>可用命令行实用程序mysqlhotcopy从一个数据库复制所有数据 （并非所有数据库引擎都支持这个实用程序）。</p><p>可以使用MySQL的BACKUP TABLE或SELECT INTO OUTFILE转储所 有数据到某个外部文件。这两条语句都接受将要创建的系统文件 名，此系统文件必须不存在，否则会出错。数据可以用RESTORE TABLE来复原。</p><blockquote><p>首先刷新未写数据 为了保证所有数据被写到磁盘（包括索引 数据），可能需要在进行备份前使用FLUSH TABLES语句。</p></blockquote><h2 id="进行数据库维护" tabindex="-1">进行数据库维护 <a class="header-anchor" href="#进行数据库维护" aria-label="Permalink to &quot;进行数据库维护&quot;">​</a></h2><p><img src="'+s+'" alt="img_120.png" loading="lazy"></p><p>CHECK TABLE用来针对许多问题对表进行检查。在MyISAM表上还对 索引进行检查。CHECK TABLE支持一系列的用于MyISAM表的方式。 CHANGED检查自最后一次检查以来改动过的表。EXTENDED执行最 彻底的检查，FAST只检查未正常关闭的表，MEDIUM检查所有被删 除的链接并进行键检验，QUICK只进行快速扫描。如下所示，CHECK TABLE发现和修复问题：</p><p><img src="'+p+'" alt="img_121.png" loading="lazy"></p><p>如果MyISAM表访问产生不正确和不一致的结果，可能需要用 REPAIR TABLE来修复相应的表。这条语句不应该经常使用，如果 需要经常使用，可能会有更大的问题要解决。</p><p>如果从一个表中删除大量数据，应该使用OPTIMIZE TABLE来收回 所用的空间，从而优化表的性能。</p><h2 id="诊断启动问题" tabindex="-1">诊断启动问题 <a class="header-anchor" href="#诊断启动问题" aria-label="Permalink to &quot;诊断启动问题&quot;">​</a></h2><p>服务器启动问题通常在对MySQL配置或服务器本身进行更改时出 现。MySQL在这个问题发生时报告错误，但由于多数MySQL服务器是作 为系统进程或服务自动启动的，这些消息可能看不到。</p><p>在排除系统启动问题时，首先应该尽量用手动启动服务器。MySQL 服务器自身通过在命令行上执行mysqld启动。下面是几个重要的mysqld 命令行选项：</p><p><img src="'+r+'" alt="img_122.png" loading="lazy"></p><h2 id="查看日志文件" tabindex="-1">查看日志文件 <a class="header-anchor" href="#查看日志文件" aria-label="Permalink to &quot;查看日志文件&quot;">​</a></h2><p>错误日志。它包含启动和关闭问题以及任意关键错误的细节。此 日志通常名为hostname.err，位于data目录中。此日志名可用 --log-error命令行选项更改。</p><p>查询日志。它记录所有MySQL活动，在诊断问题时非常有用。此 日志文件可能会很快地变得非常大，因此不应该长期使用它。此 日志通常名为hostname.log，位于data目录中。此名字可以用 --log命令行选项更改。</p><p>二进制日志。它记录更新过数据（或者可能更新过数据）的所有 语句。此日志通常名为hostname-bin，位于data目录内。</p><p>缓慢查询日志。顾名思义，此日志记录执行缓慢的任何查询。这 个日志在确定数据库何处需要优化很有用。此日志通常名为 hostname-slow.log ，位于 data 目录中。此名字可以用 --log-slow-queries命令行选项更改。</p>',22),n=[l];function _(c,d,h,m,E,S){return t(),e("div",null,n)}const L=a(i,[["render",_]]);export{y as __pageData,L as default};
