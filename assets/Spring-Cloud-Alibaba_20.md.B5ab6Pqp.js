import{_ as s,c as a,o as i,a8 as n}from"./chunks/framework.DDO5B0CJ.js";const e="/vitepress-java/assets/img_134.CTkZxYJ8.png",l="/vitepress-java/assets/img_135.Bpj6DWT6.png",t="/vitepress-java/assets/img_136.CpMBo8RD.png",p="/vitepress-java/assets/img_137.DWACK_m1.png",r="/vitepress-java/assets/img_138.CNzLLSIn.png",h="/vitepress-java/assets/img_139.BBwSvj9w.png",o="/vitepress-java/assets/img_140.HwwvDXOD.png",d="/vitepress-java/assets/img_141.-KIthe-0.png",g="/vitepress-java/assets/img_142.D3RvOCqa.png",D=JSON.parse('{"title":"20-Sentinel使用入门","description":"","frontmatter":{},"headers":[],"relativePath":"Spring-Cloud-Alibaba/20.md","filePath":"Spring-Cloud-Alibaba/20.md"}'),c={name:"Spring-Cloud-Alibaba/20.md"},k=n('<h1 id="_20-sentinel使用入门" tabindex="-1">20-Sentinel使用入门 <a class="header-anchor" href="#_20-sentinel使用入门" aria-label="Permalink to &quot;20-Sentinel使用入门&quot;">​</a></h1><p>Sentinel是阿里巴巴开源的一款产品，它提供了一组规则，用于对流量进行控制、熔断、降级等。</p><p>Sentinel可以与Spring Cloud和Spring Boot进行集成，以实现对微服务的流量控制、熔断和降级等。</p><p>Sentinel提供了多种规则，包括流量控制规则、熔断降级规则等。</p><blockquote><p>Sentinel(分布式系统的流量防卫兵)是阿里开源的一套用于服务容错的综合性解决方案。它以流量为切入点，从 流量控制，熔断降级，系统负载保护等多个维度保护服务的稳定性。</p><p>Sentinel具有以下特性：</p><ul><li>丰富的应用场景：Sentinel 承接了阿里巴巴近 10 年的双十一大促流量的核心场景，例如秒杀（即突发流量控制在系统容量可以承受的范围）、消息削峰填谷、集群流量控制、实时熔断下游不可用应用等。</li><li>完备的实时监控：Sentinel 同时提供实时的监控功能。您可以在控制台中看到接入应用的单台机器秒级数据，甚至 500 台以下规模的集群的汇总运行情况。</li><li>广泛的开源生态：Sentinel 提供开箱即用的与其它开源框架/库的整合模块，例如与 Spring Cloud、Dubbo、gRPC 的整合。您只需要引入相应的依赖并进行简单的配置即可快速地接入 Sentinel。</li><li>完善的 SPI 扩展点：Sentinel 提供简单易用、完善的 SPI 扩展接口。您可以通过实现扩展接口来快速地定制逻辑。例如定制规则管理、适配动态数据源等。</li></ul></blockquote><p><img src="'+e+`" alt="img_134.png" loading="lazy"></p><h2 id="微服务集成sentinel" tabindex="-1">微服务集成Sentinel <a class="header-anchor" href="#微服务集成sentinel" aria-label="Permalink to &quot;微服务集成Sentinel&quot;">​</a></h2><h3 id="_1-引入sentinel依赖" tabindex="-1">1. 引入Sentinel依赖 <a class="header-anchor" href="#_1-引入sentinel依赖" aria-label="Permalink to &quot;1. 引入Sentinel依赖&quot;">​</a></h3><p>在微服务的pom文件中引入Sentinel的依赖：</p><div class="language-xml vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;com.alibaba.cloud&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;spring-cloud-starter-alibaba-sentinel&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="_2-配置sentinel" tabindex="-1">2. 配置Sentinel <a class="header-anchor" href="#_2-配置sentinel" aria-label="Permalink to &quot;2. 配置Sentinel&quot;">​</a></h3><p>在微服务的application.yml文件中配置Sentinel的相关参数：</p><div class="language-yaml vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">spring</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  cloud</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    sentinel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      transport</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        dashboard</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">localhost:8080</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="_3-启动sentinel控制台" tabindex="-1">3. 启动Sentinel控制台 <a class="header-anchor" href="#_3-启动sentinel控制台" aria-label="Permalink to &quot;3. 启动Sentinel控制台&quot;">​</a></h3><p>启动Sentinel控制台，并访问<a href="http://localhost:8080/%EF%BC%8C%E5%8D%B3%E5%8F%AF%E7%9C%8B%E5%88%B0Sentinel%E7%9A%84%E6%8E%A7%E5%88%B6%E5%8F%B0%E9%A1%B5%E9%9D%A2%E3%80%82" target="_blank" rel="noreferrer">http://localhost:8080/，即可看到Sentinel的控制台页面。</a></p><p><img src="`+l+'" alt="img_135.png" loading="lazy"></p><h2 id="sentinel规则" tabindex="-1">Sentinel规则 <a class="header-anchor" href="#sentinel规则" aria-label="Permalink to &quot;Sentinel规则&quot;">​</a></h2><h3 id="_1-流量控制规则" tabindex="-1">1. 流量控制规则 <a class="header-anchor" href="#_1-流量控制规则" aria-label="Permalink to &quot;1. 流量控制规则&quot;">​</a></h3><p>流量控制规则用于限制对服务的访问流量，包括QPS（每秒请求数）和线程数两种限制方式。</p><p>QPS（每秒请求数）限制方式：</p><p>安装Sentinel控制台</p><p><img src="'+t+'" alt="img_136.png" loading="lazy"></p><p><img src="'+p+'" alt="img_137.png" loading="lazy"></p><p><img src="'+r+'" alt="img_138.png" loading="lazy"></p><p><img src="'+h+'" alt="img_139.png" loading="lazy"></p><p><img src="'+o+'" alt="img_140.png" loading="lazy"></p><h2 id="实现一个接口的限流" tabindex="-1">实现一个接口的限流 <a class="header-anchor" href="#实现一个接口的限流" aria-label="Permalink to &quot;实现一个接口的限流&quot;">​</a></h2><p>在微服务的controller中添加一个接口，并添加一个限流注解：</p><p><img src="'+d+'" alt="img_141.png" loading="lazy"></p><p><img src="'+g+'" alt="img_142.png" loading="lazy"></p>',30),E=[k];function m(_,b,u,S,y,v){return i(),a("div",null,E)}const C=s(c,[["render",m]]);export{D as __pageData,C as default};
