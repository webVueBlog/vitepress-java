import{_ as a,c as i,o as r,a8 as t}from"./chunks/framework.DDO5B0CJ.js";const e="/vitepress-java/assets/img_92.zSJNT5e4.png",o="/vitepress-java/assets/img_93.BvXazSv4.png",l="/vitepress-java/assets/img_94.CqyVgIT0.png",f=JSON.parse('{"title":"6.1-生产者发送到Broker分区策略和常见配置讲解","description":"","frontmatter":{},"headers":[],"relativePath":"AKafka/21.md","filePath":"AKafka/21.md"}'),n={name:"AKafka/21.md"},s=t('<h1 id="_6-1-生产者发送到broker分区策略和常见配置讲解" tabindex="-1">6.1-生产者发送到Broker分区策略和常见配置讲解 <a class="header-anchor" href="#_6-1-生产者发送到broker分区策略和常见配置讲解" aria-label="Permalink to &quot;6.1-生产者发送到Broker分区策略和常见配置讲解&quot;">​</a></h1><p><img src="'+e+'" alt="img_92.png" loading="lazy"></p><h2 id="kafka的product生产者发送到broker分区策略讲解" tabindex="-1">kafka的Product生产者发送到Broker分区策略讲解 <a class="header-anchor" href="#kafka的product生产者发送到broker分区策略讲解" aria-label="Permalink to &quot;kafka的Product生产者发送到Broker分区策略讲解&quot;">​</a></h2><p>生产者发送到broker里面的流程是怎样的呢？一个topic有多个</p><p><img src="'+o+'" alt="img_93.png" loading="lazy"></p><ul><li>生产者发送到broker里面的流程是怎样的呢？一个topic有多个partition分区，每个分区又有多个副本 <ul><li>如果指定Partition ID，则PR被发送至指定Partition(ProducerRecord)</li><li>如果未指定Partition ID,但指定了key，PR会按照hash(key)发送至对应的Partition</li><li>如果未指定Partition ID也没指定Key，PR会按照默认round-robin轮询模式发送到每个Partition <ul><li>消费者消费partition分区默认是range模式</li></ul></li><li>如果同时指定了Partition ID和Key，PR只会发送到指定的Partition(Key不起作用，代码逻辑决定)</li><li>注意：Partition有多个副本，但只有一个replicationLeader负责该Partition和生产者消费者交互</li></ul></li><li>生产者到broker发送流程 <ul><li>kafka的客户端发送数据到服务器，不是来一条就发一条，会经过内存缓冲区（默认是16KB），通过KafkaProducer发送出去的消息都是先进入到客户端本地的内存 缓冲里，然后把很多消息收集到的Batch里面，再一次性发送到Broker上去的，这样性能才可能提高</li></ul></li><li>生产者常见配置 <ul><li>官方文档</li></ul></li></ul><p><img src="'+l+'" alt="img_94.png" loading="lazy"></p>',7),_=[s];function c(p,k,d,u,P,m){return r(),i("div",null,_)}const h=a(n,[["render",c]]);export{f as __pageData,h as default};
